(this["webpackJsonpburger-builder-app"]=this["webpackJsonpburger-builder-app"]||[]).push([[4],{100:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(1),a=n(2),o=n(92),i=function(e,t){return function(n){n({type:a.j});var r="?auth=".concat(t);return o.a.post("/orders.json"+r,e).then((function(t){n(function(e,t){return{type:a.k,orderId:e,orderData:t}}(t.data.name,e))})).catch((function(e){n(function(e){return{type:a.i,error:e}}(e))}))}},c=function(){return{type:a.l}},u=function(e,t){return function(n){n(l());var a="?auth=".concat(e,'&orderBy="userId"&equalTo="').concat(t,'"');return o.a.get("/orders.json"+a).then((function(e){var t=[];for(var a in e.data)t.push(Object(r.a)(Object(r.a)({},e.data[a]),{},{id:a}));n(s(t))})).catch((function(e){return n(d(e))}))}},l=function(){return{type:a.g}},s=function(e){return{type:a.h,orders:e}},d=function(e){return{type:a.f,error:e}}},101:function(e,t,n){"use strict";var r=n(93),a=n(94),o=n(96),i=n(95),c=n(0),u=n.n(c),l=n(31),s=n.n(l),d=n(30);t.a=function(e,t){return function(n){Object(o.a)(l,n);var c=Object(i.a)(l);function l(e){var t;return Object(r.a)(this,l),(t=c.call(this,e)).closeModal=function(){t.setState({showModal:!1})},t.state={error:null,showModal:!1},t}return Object(a.a)(l,[{key:"componentWillMount",value:function(){var e=this;this.reqInterceptor=t.interceptors.request.use((function(t){return e.setState({error:null,showModal:!1}),t})),this.resInterceptor=t.interceptors.response.use((function(e){return e}),(function(t){e.setState({error:t,showModal:!0})}))}},{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptor),t.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return u.a.createElement(d.a,null,u.a.createElement(s.a,{isOpen:this.state.showModal,onRequestClose:this.closeModal},this.state.error?this.state.error.message:null),u.a.createElement(e,this.props))}}]),l}(c.Component)}},102:function(e,t,n){e.exports={Button:"Button_Button__3gFiX",Success:"Button_Success__2Rka1",Danger:"Button_Danger__2ogZq"}},103:function(e,t,n){e.exports={"burger-container":"Burger_burger-container__3Ugkt"}},104:function(e,t,n){e.exports={BreadBottom:"BurgerIngredient_BreadBottom__2US69",BreadTop:"BurgerIngredient_BreadTop__3Y4-R",Seeds1:"BurgerIngredient_Seeds1__J6vUJ",Seeds2:"BurgerIngredient_Seeds2__2Ylex",Meat:"BurgerIngredient_Meat__3flwI",Cheese:"BurgerIngredient_Cheese__3rOTJ",Salad:"BurgerIngredient_Salad__KLnhy",Bacon:"BurgerIngredient_Bacon__1KK6n"}},108:function(e,t,n){"use strict";var r=n(21);var a=n(34);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=n(0),c=n.n(i),u=n(103),l=n.n(u),s=n(104),d=n.n(s),f=function(e){var t=null;switch(e.type){case"bread-bottom":t=c.a.createElement("div",{className:d.a.BreadBottom});break;case"bread-top":t=c.a.createElement("div",{className:d.a.BreadTop},c.a.createElement("div",{className:d.a.Seeds1}),c.a.createElement("div",{className:d.a.Seeds2}));break;case"meat":t=c.a.createElement("div",{className:d.a.Meat});break;case"cheese":t=c.a.createElement("div",{className:d.a.Cheese});break;case"salad":t=c.a.createElement("div",{className:d.a.Salad});break;case"bacon":t=c.a.createElement("div",{className:d.a.Bacon});break;default:t=null}return t};t.a=function(e){var t=Object.keys(e.ingredients).map((function(t){return o(Array(e.ingredients[t])).map((function(e,n){return c.a.createElement(f,{key:t+n,type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]);return 0===t.length&&(t=c.a.createElement("h3",null,"Please start adding ingredients!")),c.a.createElement("div",{className:l.a["burger-container"]},c.a.createElement(f,{type:"bread-top"})," ",t,c.a.createElement(f,{type:"bread-bottom"}))}},109:function(e,t,n){e.exports={"build-controls":"BuildControls_build-controls__25CfY",OrderButton:"BuildControls_OrderButton___M-Du",enable:"BuildControls_enable__9xLsD"}},110:function(e,t,n){e.exports={"build-control":"BuildControl_build-control__3at-c",label:"BuildControl_label__1Uevy",less:"BuildControl_less__2hxbJ",more:"BuildControl_more__37Pf-"}},112:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(93),o=n(94),i=n(96),c=n(95),u=n(0),l=n.n(u),s=n(31),d=n.n(s),f=n(92),p=n(9),h=n(2),b=function(){return function(e){return f.a.get("/ingredients.json").then((function(t){var n;e((n=t.data,{type:h.o,ingredients:n}))})).catch((function(t){e({type:h.p})}))}},m=n(100),g=n(17),y=n(101),_=n(30),v=n(108),E=n(109),O=n.n(E),B=n(110),I=n.n(B),j=function(e){return l.a.createElement("div",{className:I.a["build-control"]},l.a.createElement("div",{className:I.a.label},e.label),l.a.createElement("button",{className:I.a.less,disabled:e.disabledInfo,onClick:e.removeIngredient},"Less"),l.a.createElement("button",{className:I.a.more,onClick:e.addIngredient},"More"))},S=[{label:"Bacon",type:"bacon"},{label:"Salad",type:"salad"},{label:"Cheese",type:"cheese"},{label:"Meat",type:"meat"}],k=function(e){var t=Object(r.a)({},e.ingredients);for(var n in t)t[n]=t[n]<=0;return l.a.createElement("div",{className:O.a["build-controls"]},l.a.createElement("h3",null,"Current Price: $",(e.totalPrice/100).toFixed(2)),S.map((function(n){return l.a.createElement(j,{key:n.type,label:n.label,disabledInfo:t[n.type],addIngredient:function(){return e.addIngredient(n.type)},removeIngredient:function(){return e.removeIngredient(n.type)}})})),l.a.createElement("button",{className:O.a.OrderButton,disabled:!e.purchasable,onClick:e.setOpenModal},e.isAuth?"Order Now":"Signup to order"))},w=n(99),C=Object(p.b)((function(e){var t=e.burgerBuilder;return{ingredients:t.ingredients,totalPrice:t.totalPrice}}))((function(e){var t=Object.keys(e.ingredients).map((function(t,n){return l.a.createElement("li",{key:t+n},l.a.createElement("span",null,t),": ",e.ingredients[t])}));return l.a.createElement(_.a,null,l.a.createElement("h3",null,"Your order:"),l.a.createElement("p",null,"A delicious burger with the following ingredients:"),l.a.createElement("ul",null,t),l.a.createElement("p",null,l.a.createElement("strong",null,"Yennifuuuhhhh!!! Yo total is $",(e.totalPrice/100).toFixed(2))),l.a.createElement("p",null,"Check me out? *wink*"),l.a.createElement(w.a,{clicked:e.setCloseModal,btnType:"Danger"},"Cancel"),l.a.createElement(w.a,{clicked:e.continuePurchase,btnType:"Success"},"Continue"))})),M=n(97),P=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={showModal:!1},e.handleAddIngredient=function(t){e.props.addIngredient(t)},e.handleRemoveIngredient=function(t){e.props.removeIngredient(t)},e.handleOpenModal=function(){e.props.isAuthenticated?e.setState({showModal:!0}):(e.props.onSetAuthRedirectPath("/checkout"),e.props.history.push("/login"))},e.handleCloseModal=function(){e.setState({showModal:!1})},e.handlePurchase=function(){e.props.onInitPurchase(),e.props.history.push({pathname:"/checkout"})},e.updatePurchaseState=function(e){var t=Object(r.a)({},e);return Object.keys(t).map((function(t){return e[t]})).reduce((function(e,t){return e+t}),0)>0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.getIngredients()}},{key:"componentWillMount",value:function(){d.a.setAppElement("body")}},{key:"render",value:function(){var e=l.a.createElement(_.a,null,l.a.createElement(v.a,{ingredients:this.props.ingredients}),l.a.createElement(k,{addIngredient:this.handleAddIngredient,removeIngredient:this.handleRemoveIngredient,totalPrice:this.props.totalPrice,ingredients:this.props.ingredients,purchasable:this.updatePurchaseState(this.props.ingredients),isAuth:this.props.isAuthenticated,setOpenModal:this.handleOpenModal}));return l.a.createElement(_.a,null,this.props.ingredients?e:this.props.error?"Something went wrong":l.a.createElement(M.a,null),l.a.createElement(d.a,{isOpen:this.state.showModal,onRequestClose:this.handleCloseModal},l.a.createElement(C,{continuePurchase:this.handlePurchase,setCloseModal:this.handleCloseModal})))}}]),n}(u.Component);t.default=Object(p.b)((function(e){var t=e.burgerBuilder,n=e.auth;return{ingredients:t.ingredients,totalPrice:t.totalPrice,error:t.error,isAuthenticated:null!==n.token}}),(function(e){return{addIngredient:function(t){return e(function(e){return{type:h.a,ingredient:e}}(t))},removeIngredient:function(t){return e(function(e){return{type:h.m,ingredient:e}}(t))},getIngredients:function(){return e(b())},onInitPurchase:function(){return e(Object(m.c)())},onSetAuthRedirectPath:function(t){return e(Object(g.d)(t))}}}))(Object(y.a)(P,f.a))},92:function(e,t,n){"use strict";var r=n(32),a=n.n(r).a.create({baseURL:"https://react-burger-builder-f5a6f.firebaseio.com/"});t.a=a},93:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},94:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},95:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return function(){var t,n=r(e);if(a()){var o=r(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return i(this,t)}}n.d(t,"a",(function(){return c}))},96:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return a}))},97:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(98),i=n.n(o);t.a=function(){return a.a.createElement("div",{className:i.a.loader},"Loading...")}},98:function(e,t,n){e.exports={loader:"Spinner_loader__fTuX5",load7:"Spinner_load7__3lEXz"}},99:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(102),i=n.n(o);t.a=function(e){return a.a.createElement("button",{className:[i.a.Button,i.a[e.btnType]].join(" "),onClick:e.clicked,disabled:e.disabled},e.children)}}}]);
//# sourceMappingURL=4.7aa8c611.chunk.js.map